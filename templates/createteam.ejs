<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create Team | RannNeeti-22</title>

    <link rel="shortcut icon" type="image/x-icon" href="/images/logo.png" />
    <link rel="stylesheet" href="/fonts/icomoon/style.css" />

    <link rel="stylesheet" href="/css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/css/jquery-ui.css" />
    <link rel="stylesheet" href="/css/owl.carousel.min.css" />
    <link rel="stylesheet" href="/css/owl.theme.default.min.css" />
    <link rel="stylesheet" href="/css/owl.theme.default.min.css" />

    <link rel="stylesheet" href="/css/jquery.fancybox.min.css" />

    <link rel="stylesheet" href="/css/bootstrap-datepicker.css" />

    <link rel="stylesheet" href="/fonts/flaticon/font/flaticon.css" />

    <link rel="stylesheet" href="/css/aos.css" />

    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/navbar.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <style>
        input {
            color: black;
        }

        @media only screen and (max-width: 500px) {
            /* * {
                font-size: 0.5rem;
            } */

            input {
                font-size: 10px;
            }
        }

        .site-navbar {
            position: unset !important;
        }

        input {
            color: black !important;
        }

        input[type="radio"] {
            height: 25px;
            vertical-align: middle;
            background-color: #ee1e47;
        }

        #genderback:hover {
            background-color: #ee1e47;
        }
    </style>
</head>

<body onload="load()">
    <div class="site-wrap" style="
        background: url('/images/createteambg.jpeg') no-repeat center
          center/cover;
        height: auto;
        min-height: 100vh;
      ">
        <%- include('partials/preloader.ejs') %>
            <div style="background-color: black">
                <%- include('partials/navbar.ejs') %>
            </div>

            <div class="">
                <div class="container">
                    <div class="row align-items-center" style="margin-bottom: 35px; height: auto">
                        <div class="mx-auto text-center" style="margin-top: 20px">
                            <h1 class="text-white px-5 font-weight-bold" style="font-size: 32px">
                                Registration for <%= event.name%>
                            </h1>
                            <!-- <button class="btn btn-primary" style=" padding: 7px;
                  margin-top: 30px;
                  width: 45%;
                  border-radius: 30px;
                  font-size: 20px;">RuleBook</button> -->
                            <hr color="#EE1E47" style="
                  height: 0.5px;
                  box-shadow: 0 8px 2px -2px #ee1e47;
                  max-width: 90%;
                " />
                        </div>
                    </div>
                </div>

                <div class="container mx-auto row align-items-center">
                    <form class="mx-auto d-flex flex-column align-items-center"
                        action="/events/createTeam?game=<%=event.name%>" method="POST" style="width: 500px">
                        <div class="title-section container">
                            <label class="heading m-0 py-2" for="TeamName">Team Name</label>
                        </div>
                        <input required
                            style="text-align: center;width: 70%;padding: 5px;font-size: 16px;margin-left: 30px;margin-bottom: 20px;border-radius: 10px;"
                            name="TeamName" id="TeamName" type="text" placeholder="Enter Team Name"
                            autocomplete="off" />

                        <div class="title-section container">
                            <label class="heading m-0 py-2" for="college">College Name</label>
                        </div>
                        <div style="width:100%;margin-bottom: 20px;position: relative;"
                            class="d-flex d-flex-col justify-content-center">
                            <input class="justify-center"
                                style="text-align: center; color:black; width: 70%; padding: 5px; font-size: 16px; border-radius: 10px;"
                                name="college" id="college" placeholder="Enter College Name" required
                                autocomplete="off">
                            <ul class="example" id='college-suggestions'
                                style="z-index:2;display:none;list-style-type:none;position: absolute;top:100%;margin:5px;background-color: black; width:70%;max-height:calc(5*(1rem + 20px));overflow-y: scroll;">
                            </ul>
                        </div>

                        <div class="title-section container" style="margin-top: 30px">
                            <label class="heading m-0 py-2" for="phone">Phone Number</label>
                        </div>
                        <input required style="
                text-align: center;
                font-size: 16px;
                width: 70%;
                padding: 5px;
                margin-left: 30px;
                border-radius: 10px;
              " name="phone" id="phone" type="text" pattern="[0-9]{10}" placeholder="Enter Phone Number"
                            autocomplete="off" />
                        <!-- <hr> -->

                        <% if(event.genderSpecific){%>
                            <div class="title-section container" style="margin-top: 20px">
                                <label class="heading m-0 py-2">Gender</label>
                            </div>

                            <div class="title-section container">
                                <select id="gender" class="form-select form-select-lg mb-3" name="gender" style="color: black;width:75%;
                height: 40px;border-radius: 10px; font-size: 20px; text-align: center;margin-left:15%;"
                                    aria-label=".form-select-lg example">
                                    <option id="genderback" selected value="1"
                                        style="color: black;background-color: #fff;width:75%;">Men </option>
                                    <option id="genderback" value="2"
                                        style="color: black;background-color: #fff;width:75%;">Women</option>
                                </select>
                            </div>

                            <%}%>

                                <div class="title-section container" style="margin-top: 40px">
                                    <label class="heading m-0 py-2" for="registration" id="regfee">Registration Fee -
                                        <span id="amount">
                                            <%= event.fees%>
                                        </span>
                                    </label>
                                </div>
                                <p style="font-size: 16px">
                                    You have to pay this fees after registration, through payment
                                    portal.
                                </p>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value=""
                                        id="flexCheckCheckedDisabled" checked disabled />
                                    <label class="form-check-label" for="flexCheckCheckedDisabled">
                                        <p>
                                            I have understood the
                                            <a target="_blank"
                                                href="https://docs.google.com/document/d/17PjtDxJU5LqRwnL999qoHMTUzI2UJyhoOB9MumLFTrc/edit?usp=sharing">terms
                                                and policy</a>
                                            of IIT Mandi
                                        </p>
                                    </label>
                                </div>

                                <button style="
                width: 30%;
                padding: 10px;
                border-radius: 30px;
                margin: 40px;
                margin-left: 30px;
              " class="btn btn-primary">
                                    Confirm
                                </button>
                    </form>
                </div>
            </div>
            <%- include('partials/footer.ejs') %>
    </div>

    <script>
        document.querySelector('#gender').addEventListener("change", function () {
            if (this.value == "1") {
                document.querySelector('#amount').innerText = "<%-event.fees %>"
            } else {
                document.querySelector('#amount').innerText = "<%-event.womenFees %>"
            }
        });

        const colleges = JSON.parse('<%- JSON.stringify(colleges) %>')
        const college_suggestions = document.getElementById('college-suggestions')
        const input_box = document.getElementById('college')

        input_box.addEventListener('focus', () => {
            college_suggestions.style.display = 'block'
        })

        var regex_expr = "|"
        colleges.forEach(element => {
            // create regex for the input
            regex_expr += element + "|"
            //append colleges in li under #college-suggestions
            const suggestion = document.createElement('li')
            suggestion.innerText = element
            suggestion.style.padding = "5px 10px"
            suggestion.style.color = 'red'
            suggestion.style.textAlign = 'center'
            suggestion.style.cursor = 'pointer'
            suggestion.addEventListener('mouseover', () => { suggestion.style.background = 'white' })
            suggestion.addEventListener('mouseout', () => { suggestion.style.background = 'black' })
            suggestion.addEventListener('click', () => { input_box.value = suggestion.innerText })
            college_suggestions.appendChild(suggestion)
        });

        input_box.addEventListener('input', (e) => {
            college_suggestions.querySelectorAll('li').forEach((element) => {
                if (element.innerText.toLowerCase().includes(e.target.value.toLowerCase())) {
                    element.style.display = 'block'
                } else {
                    element.style.display = 'none'
                }
            })
        })

        input_box.setAttribute('pattern', regex_expr)

        input_box.addEventListener('blur', () => {
            setTimeout(() => {
                college_suggestions.style.display = 'none'
            }, 500)
        })
    </script>

    <script src="/js/jquery-3.3.1.min.js"></script>
    <script src="/js/jquery-migrate-3.0.1.min.js"></script>
    <script src="/js/jquery-ui.js"></script>
    <script src="/js/popper.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/jquery.stellar.min.js"></script>
    <script src="/js/jquery.countdown.min.js"></script>
    <script src="/js/bootstrap-datepicker.min.js"></script>
    <script src="/js/jquery.easing.1.3.js"></script>
    <script src="/js/aos.js"></script>
    <script src="/js/jquery.fancybox.min.js"></script>
    <script src="/js/jquery.sticky.js"></script>
    <script src="/js/jquery.mb.YTPlayer.min.js"></script>

    <script src="/js/validator.js"></script>
    <script src="/js/main.js"></script>
</body>

</html>